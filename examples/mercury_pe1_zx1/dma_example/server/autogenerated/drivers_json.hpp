/// Autogenerated DO NOT EDIT
///
/// (c) Koheron

#ifndef __DRIVERS_JSON_HPP__
#define __DRIVERS_JSON_HPP__

#include <array>
#include <sstream>
#include <string>
#include <typeinfo>
#include <cxxabi.h>

#include "././drivers/common.hpp"
#include "././../dma_example.hpp"


// http://stackoverflow.com/questions/4484982/how-to-convert-typename-t-to-string-in-c
template<typename T>
inline auto get_type_str()
{
    std::string res;
    char *name = nullptr;
    int status;
    name = abi::__cxa_demangle(typeid(T).name(), nullptr, nullptr, &status);

    if (name != nullptr) {
        res = std::string(name);
    }
    else {
        res = std::string(typeid(T).name());
    }

    free(name);
    return res;
}

inline auto build_drivers_json()
{
    std::stringstream ss;
    ss << "[{\"functions\":[{\"ret_type\":\"const char *\",\"args\":[],\"name\":\"get_version\",\"id\":0},{\"ret_type\":\"std::string\",\"args\":[],\"name\":\"get_cmds\",\"id\":1}],\"class\":\"KServer\",\"id\":1},{\"functions\":[{\"ret_type\":\"void\",\"args\":[{\"type\":\"uint32_t\",\"name\":\"value\"}],\"name\":\"set_led\",\"id\":0},{\"ret_type\":\"uint32_t\",\"args\":[],\"name\":\"get_led\",\"id\":1},{\"ret_type\":\"void\",\"args\":[],\"name\":\"init\",\"id\":2},{\"ret_type\":\"std::string\",\"args\":[],\"name\":\"get_instrument_config\",\"id\":3},{\"ret_type\":\"void\",\"args\":[],\"name\":\"ip_on_leds\",\"id\":4}],\"class\":\"Common\",\"id\":2},{\"functions\":[{\"ret_type\":\"void\",\"args\":[{\"type\":\"std::vector<uint32_t>\",\"name\":\"dac_data\"}],\"name\":\"set_dac_data\",\"id\":0},{\"ret_type\":\"void\",\"args\":[{\"type\":\"uint32_t\",\"name\":\"idx\"},{\"type\":\"uint32_t\",\"name\":\"buffer_address\"},{\"type\":\"uint32_t\",\"name\":\"buffer_length\"}],\"name\":\"set_descriptor_mm2s\",\"id\":1},{\"ret_type\":\"void\",\"args\":[{\"type\":\"uint32_t\",\"name\":\"idx\"},{\"type\":\"uint32_t\",\"name\":\"buffer_address\"},{\"type\":\"uint32_t\",\"name\":\"buffer_length\"}],\"name\":\"set_descriptor_s2mm\",\"id\":2},{\"ret_type\":\"void\",\"args\":[],\"name\":\"set_descriptors\",\"id\":3},{\"ret_type\":\"void\",\"args\":[],\"name\":\"start_dma\",\"id\":4},{\"ret_type\":\"void\",\"args\":[],\"name\":\"stop_dma\",\"id\":5},{\"ret_type\":\"" << get_type_str<decltype(std::declval<DmaExample>().get_adc_data())>() << "\",\"args\":[],\"name\":\"get_adc_data\",\"id\":6},{\"ret_type\":\"uint64_t\",\"args\":[],\"name\":\"get_dna\",\"id\":7},{\"ret_type\":\"void\",\"args\":[{\"type\":\"uint32_t\",\"name\":\"led_value\"}],\"name\":\"set_leds\",\"id\":8},{\"ret_type\":\"uint32_t\",\"args\":[],\"name\":\"get_leds\",\"id\":9},{\"ret_type\":\"void\",\"args\":[{\"type\":\"uint32_t\",\"name\":\"index\"},{\"type\":\"bool\",\"name\":\"status\"}],\"name\":\"set_led\",\"id\":10},{\"ret_type\":\"uint32_t\",\"args\":[],\"name\":\"get_forty_two\",\"id\":11}],\"class\":\"DmaExample\",\"id\":3}]";
    return ss.str();
}

#endif // __DRIVERS_JSON_HPP__